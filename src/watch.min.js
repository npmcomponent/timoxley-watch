"use strict";(function(e){if(typeof exports==="object"){module.exports=e()}else if(typeof define==="function"&&define.amd){define(e)}else{window.WatchJS=e();window.watch=window.WatchJS.watch;window.unwatch=window.WatchJS.unwatch;window.callWatchers=window.WatchJS.callWatchers}})(function(){var e={noMore:false,isFunction:function(e){var t={};return e&&t.toString.call(e)=="[object Function]"},isInt:function(e){return e%1===0},isArray:function(e){return Object.prototype.toString.call(e)==="[object Array]"},defineGetAndSet:function(e,t,n,r){try{Object.defineProperty(e,t,{get:n,set:r,enumerable:true,configurable:true})}catch(i){try{Object.prototype.__defineGetter__.call(e,t,n);Object.prototype.__defineSetter__.call(e,t,r)}catch(s){throw"watchJS error: browser not supported :/"}}},defineProp:function(e,t,n){try{Object.defineProperty(e,t,{enumerable:false,configurable:true,writable:false,value:n})}catch(r){e[t]=n}}};var t=function(){if(arguments.length==2)n.apply(this,arguments);else if(e.isArray(arguments[1]))r.apply(this,arguments);else i.apply(this,arguments)};var n=function(t,n){if(t instanceof String||!(t instanceof Object)&&!e.isArray(t))return;var i=[];if(e.isArray(t)){for(var s=0;s<t.length;s++){i.push(s)}}else{for(var o in t){i.push(o)}}r(t,i,n)};var r=function(t,n,r){if(e.isArray(t)){for(var s in n){i(t,n[s],r)}}else{for(var o in n){i(t,n[o],r)}}};var i=function(t,r,i){var s=t[r];if(t[r]===undefined||e.isFunction(t[r])){return}if(t[r]!=null){n(t[r],i)}h(t,r);if(!t.watchers){e.defineProp(t,"watchers",{})}if(!t.watchers[r]){t.watchers[r]=[]}t.watchers[r].push(i);var o=function(){return s};var u=function(o){var u=s;s=o;if(t[r]){n(t[r],i)}h(t,r);if(JSON.stringify(u)!==JSON.stringify(o)){if(!e.noMore){f(t,r,o,u);e.noMore=false}}};e.defineGetAndSet(t,r,o,u)};var s=function(){if(arguments.length==2)o.apply(this,arguments);else if(e.isArray(arguments[1]))u.apply(this,arguments);else a.apply(this,arguments)};var o=function(t,n){if(t instanceof String||!(t instanceof Object)&&!e.isArray(t)){return}var r=[];if(e.isArray(t)){for(var i=0;i<t.length;i++){r.push(i)}}else{for(var s in t){r.push(s)}}u(t,r,n)};var u=function(t,n,r){if(e.isArray(t)){for(var i in n){a(t,n[i],r)}}else{for(var s in n){a(t,n[s],r)}}};var a=function(e,t,n){for(var r in e.watchers[t]){var i=e.watchers[t][r];if(i==n)e.watchers[t].splice(r,1)}};var f=function(t,n,r,i){for(var s in t.watchers[n]){if(e.isInt(s)){t.watchers[n][s](n,r,i)}}};var l=["pop","push","reverse","shift","sort","slice","unshift"];var c=function(t,n,r,s){e.defineProp(t[n],s,function(){var e=r.apply(t,arguments);i(t,t[n]);if(s!=="slice"){f(t,n)}return e})};var h=function(t,n){if(!t[n]||t[n]instanceof String||!e.isArray(t[n])){return}for(var r=l.length,i;r--;){i=l[r];c(t,n,t[n][i],i)}};e.watch=t;e.unwatch=s;e.callWatchers=f;return e})
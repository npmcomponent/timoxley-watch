var watch;var unwatch;var callWatchers;var WatchJS={noMore:false,isFunction:function(e){var t={};return e&&t.toString.call(e)=="[object Function]"},isInt:function(e){var t=parseInt(e);if(isNaN(t))return false;return e==t&&e.toString()==t.toString()},isArray:function(e){return Object.prototype.toString.call(e)==="[object Array]"},defineGetAndSet:function(e,t,n,r){try{Object.defineProperty(e,t,{get:n,set:r,enumerable:true,configurable:true})}catch(i){try{Object.prototype.__defineGetter__.call(e,t,n);Object.prototype.__defineSetter__.call(e,t,r)}catch(s){throw"watchJS error: browser not supported :/"}}},defineProp:function(e,t,n){try{Object.defineProperty(e,t,{enumerable:false,configurable:true,writable:false,value:n})}catch(r){e[t]=n}}};(function(){watch=function(){if(arguments.length==2)e.apply(this,arguments);else if(WatchJS.isArray(arguments[1]))t.apply(this,arguments);else n.apply(this,arguments)};var e=function(e,n){if(e instanceof String||!(e instanceof Object)&&!WatchJS.isArray(e))return;var r=[];if(WatchJS.isArray(e)){for(var i=0;i<e.length;i++){r.push(i)}}else{for(var s in e){r.push(s)}}t(e,r,n)};var t=function(e,t,r){if(WatchJS.isArray(e)){for(var i in t){n(e,t[i],r)}}else{for(var s in t){n(e,t[s],r)}}};var n=function(t,n,r){var i=t[n];if(t[n]===undefined||WatchJS.isFunction(t[n]))return;if(t[n]!=null)e(t[n],r);o(t,n);if(!t.watchers){WatchJS.defineProp(t,"watchers",{})}if(!t.watchers[n])t.watchers[n]=[];t.watchers[n].push(r);var s=function(){return i};var u=function(s){var u=i;i=s;if(t[n])e(t[n],r);o(t,n);if(JSON.stringify(u)!=JSON.stringify(s)){if(!WatchJS.noMore){callWatchers(t,n,s,u);WatchJS.noMore=false}}};WatchJS.defineGetAndSet(t,n,s,u)};unwatch=function(){if(arguments.length==2)r.apply(this,arguments);else if(WatchJS.isArray(arguments[1]))i.apply(this,arguments);else s.apply(this,arguments)};var r=function(e,t){if(e instanceof String||!(e instanceof Object)&&!WatchJS.isArray(e))return;var n=[];if(WatchJS.isArray(e)){for(var r=0;r<e.length;r++){n.push(r)}}else{for(var s in e){n.push(s)}}i(e,n,t)};var i=function(e,t,n){if(WatchJS.isArray(e)){for(var r in t){s(e,t[r],n)}}else{for(var i in t){s(e,t[i],n)}}};var s=function(e,t,n){for(var r in e.watchers[t]){var i=e.watchers[t][r];if(i==n)e.watchers[t].splice(r,1)}};callWatchers=function(e,t,n,r){for(var i in e.watchers[t]){if(WatchJS.isInt(i)){e.watchers[t][i](t,n,r)}}};var o=function(e,t){if(!e[t]||e[t]instanceof String||!WatchJS.isArray(e[t]))return;var r=e[t].pop;WatchJS.defineProp(e[t],"pop",function(){var i=r.apply(e,arguments);n(e,e[t]);callWatchers(e,t);return i});var i=e[t].push;WatchJS.defineProp(e[t],"push",function(){var r=i.apply(e,arguments);n(e,e[t]);callWatchers(e,t);return r});var s=e[t].reverse;WatchJS.defineProp(e[t],"reverse",function(){var r=s.apply(e,arguments);n(e,e[t]);callWatchers(e,t);return r});var o=e[t].shift;WatchJS.defineProp(e[t],"shift",function(){var r=o.apply(e,arguments);n(e,e[t]);callWatchers(e,t);return r});var u=e[t].sort;WatchJS.defineProp(e[t],"sort",function(){var r=u.apply(e,arguments);n(e,e[t]);callWatchers(e,t);return r});var a=e[t].slice;WatchJS.defineProp(e[t],"slice",function(){var r=a.apply(e,arguments);n(e,e[t]);return r});var f=e[t].unshift;WatchJS.defineProp(e[t],"unshift",function(){var r=f.apply(e,arguments);n(e,e[t]);callWatchers(e,t);return r})}})()
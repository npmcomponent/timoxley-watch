var WatchJS={noMore:false,isFunction:function(e){var t={};return e&&t.toString.call(e)=="[object Function]"},isInt:function(e){var t=parseInt(e);if(isNaN(t))return false;return e==t&&e.toString()==t.toString()},isArray:function(e){return Object.prototype.toString.call(e)==="[object Array]"},defineGetAndSet:function(e,t,n,r){try{Object.defineProperty(e,t,{get:n,set:r,enumerable:true,configurable:true})}catch(i){try{Object.prototype.__defineGetter__.call(e,t,n);Object.prototype.__defineSetter__.call(e,t,r)}catch(s){throw"watchJS error: browser not supported :/"}}},defineProp:function(e,t,n){try{Object.defineProperty(e,t,{enumerable:false,configurable:true,writable:false,value:n})}catch(r){e[t]=n}}};WatchJS.defineProp(Object.prototype,"watch",function(){if(arguments.length==1)this.watchAll.apply(this,arguments);else if(WatchJS.isArray(arguments[0]))this.watchMany.apply(this,arguments);else this.watchOne.apply(this,arguments)});WatchJS.defineProp(Object.prototype,"watchAll",function(e){var t=this;if(t instanceof String||!(t instanceof Object)&&!WatchJS.isArray(t))return;var n=[];if(WatchJS.isArray(t)){for(var r=0;r<t.length;r++){n.push(r)}}else{for(var i in t){n.push(i)}}t.watchMany(n,e)});WatchJS.defineProp(Object.prototype,"watchMany",function(e,t){var n=this;if(WatchJS.isArray(n)){for(var r in e){n.watchOne(e[r],t)}}else{for(var i in e){n.watchOne(e[i],t)}}});WatchJS.defineProp(Object.prototype,"watchOne",function(e,t){var n=this;var r=n[e];if(n[e]===undefined||WatchJS.isFunction(n[e]))return;if(n[e]!=null)n[e].watchAll(t);n.watchFunctions(e);if(!n.watchers){WatchJS.defineProp(n,"watchers",{})}if(!n.watchers[e])n.watchers[e]=[];n.watchers[e].push(t);var i=function(){return r};var s=function(i){var s=r;r=i;if(n[e])n[e].watchAll(t);n.watchFunctions(e);if(JSON.stringify(s)!=JSON.stringify(i)){if(!WatchJS.noMore){n.callWatchers(e);WatchJS.noMore=false}}};WatchJS.defineGetAndSet(n,e,i,s)});WatchJS.defineProp(Object.prototype,"unwatch",function(){if(arguments.length==1)this.unwatchAll.apply(this,arguments);else if(WatchJS.isArray(arguments[0]))this.unwatchMany.apply(this,arguments);else this.unwatchOne.apply(this,arguments)});WatchJS.defineProp(Object.prototype,"unwatchAll",function(e){var t=this;if(t instanceof String||!(t instanceof Object)&&!WatchJS.isArray(t))return;var n=[];if(WatchJS.isArray(t)){for(var r=0;r<t.length;r++){n.push(r)}}else{for(var i in t){n.push(i)}}t.unwatchMany(n,e)});WatchJS.defineProp(Object.prototype,"unwatchMany",function(e,t){var n=this;if(WatchJS.isArray(n)){for(var r in e){n.unwatchOne(e[r],t)}}else{for(var i in e){n.unwatchOne(e[i],t)}}});WatchJS.defineProp(Object.prototype,"unwatchOne",function(e,t){for(var n in this.watchers[e]){var r=this.watchers[e][n];if(r==t)this.watchers[e].splice(n,1)}});WatchJS.defineProp(Object.prototype,"callWatchers",function(e){var t=this;for(var n in t.watchers[e]){if(WatchJS.isInt(n)){t.watchers[e][n]()}}});WatchJS.defineProp(Object.prototype,"watchFunctions",function(e){var t=this;if(!t[e]||t[e]instanceof String||!WatchJS.isArray(t[e]))return;var n=t[e].pop;WatchJS.defineProp(t[e],"pop",function(){var r=n.apply(this,arguments);t.watchOne(t[e]);t.callWatchers(e);return r});var r=t[e].push;WatchJS.defineProp(t[e],"push",function(){var n=r.apply(this,arguments);t.watchOne(t[e]);t.callWatchers(e);return n});var i=t[e].reverse;WatchJS.defineProp(t[e],"reverse",function(){var n=i.apply(this,arguments);t.watchOne(t[e]);t.callWatchers(e);return n});var s=t[e].shift;WatchJS.defineProp(t[e],"shift",function(){var n=s.apply(this,arguments);t.watchOne(t[e]);t.callWatchers(e);return n});var o=t[e].sort;WatchJS.defineProp(t[e],"sort",function(){var n=o.apply(this,arguments);t.watchOne(t[e]);t.callWatchers(e);return n});var u=t[e].slice;WatchJS.defineProp(t[e],"slice",function(){var n=u.apply(this,arguments);t.watchOne(t[e]);return n});var a=t[e].unshift;WatchJS.defineProp(t[e],"unshift",function(){var n=a.apply(this,arguments);t.watchOne(t[e]);t.callWatchers(e);return n})})